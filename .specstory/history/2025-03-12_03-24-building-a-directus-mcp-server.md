<!-- Generated by SpecStory -->

# Building a Directus MCP Server (2025-03-11 23:24:24)

_**User**_

Please follow the included guide to scaffold and build the complete Directus MCP server. You may disregard the beginning section about first installing and confguring a Directus instance. We're going to skip that since we've already got a complete directus build to test with. For future reference, we can access it at https://directus-dev.learnwith.cc

---

_**Assistant**_

<think>The user wants me to scaffold and build a complete Directus MCP server following the guide in the attached file. They've indicated that they already have a Directus instance running at https://directus-dev.learnwith.cc, so we can skip the section about installing and configuring Directus.

I'll focus on creating the MCP server part of the project. From the guide, it looks like I need to:

1. Create the project directory structure
2. Initialize the Node.js project
3. Set up the TypeScript configuration
4. Create the MCP server core files
5. Implement the MCP tool functions to interact with Directus
6. Create a configuration file
7. Set up the build and run scripts

Let's start by creating the project structure and initializing the Node.js project.</think># Building a Directus MCP Server

I'll help you scaffold and build the complete Directus MCP server based on the guide. As you mentioned, we'll skip the Directus installation part since you already have a running instance at https://directus-dev.learnwith.cc.

Let's start by setting up the project structure and implementing the server.

## 1. Create the Project Directory and Initialize

First, let's create the project directory and set up the initial structure:

---

```bash
mkdir -p directus-mcp-server
```

```
❯ mkdir -p directus-mcp-server

╭─     ~/dev/projects/mcp-directus ······················································ ✔  23:30:37   
╰─
```

---

Now let's navigate to the new directory and initialize the Node.js project:

---

```bash
cd directus-mcp-server && npm init -y
```

```
❯ cd directus-mcp-server && npm init -y
Wrote to /Users/cryophobic/dev/projects/mcp-directus/directus-mcp-server/package.json:

{
  "name": "directus-mcp-server",
  "version": "1.0.0",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "description": ""
}




╭─     ~/dev/projects/mcp-directus/directus-mcp-server ·································· ✔  23:30:40   
╰─
```

---

## 2. Install Dependencies

Let's install the necessary dependencies:

---

```bash
npm install --save-dev typescript @types/node ts-node nodemon
```

```


╭─     ~/dev/projects/mcp-directus/directus-mcp-server ·································· ✔  23:30:40   
❯ npm install --save-dev typescript @types/node ts-node nodemon

added 49 packages, and audited 50 packages in 5s

4 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities

╭─     ~/dev/projects/mcp-directus/directus-mcp-server ·························· ✔  6s    23:30:49   
╰─
```

---

```bash
npm install axios dotenv express
```

```
❯ npm install axios dotenv express

added 85 packages, and audited 135 packages in 3s

21 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities

╭─     ~/dev/projects/mcp-directus/directus-mcp-server ·························· ✔  3s    23:30:57   
╰─
```

---

Let's add the Express type definitions:

---

```bash
npm install --save-dev @types/express
```

```
❯ npm install --save-dev @types/express

added 10 packages, and audited 145 packages in 2s

21 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities

╭─     ~/dev/projects/mcp-directus/directus-mcp-server ·································· ✔  23:31:01   
╰─
```

---

## 3. Create TypeScript Configuration

Let's create the TypeScript configuration file:

---

```diff
- 
+ {
+   "compilerOptions": {
+     "target": "ES2020",
+     "module": "commonjs",
+     "outDir": "./dist",
+     "strict": true,
+     "esModuleInterop": true,
+     "skipLibCheck": true,
+     "forceConsistentCasingInFileNames": true
+   },
+   "include": ["src/**/*"],
+   "exclude": ["node_modules", "**/*.test.ts"]
+ } 
```

---

## 4. Set Up Directory Structure

Now let's create the source directory structure:

---

```bash
mkdir -p src/tools src/resources src/utils
```

```
❯ mkdir -p src/tools src/resources src/utils

╭─     ~/dev/projects/mcp-directus/directus-mcp-server ·································· ✔  23:31:14   
╰─
```

---

## 5. Create MCP Server Core Files

Let's create the main server file:

---

```diff
- 
+ import express from 'express';
+ import dotenv from 'dotenv';
+ import { DirectusMCPServer } from './directusMCPServer';
+ 
+ dotenv.config();
+ 
+ const app = express();
+ app.use(express.json());
+ 
+ const port = process.env.PORT || 3000;
+ const directusUrl = process.env.DIRECTUS_URL || 'http://localhost:8055';
+ const directusToken = process.env.DIRECTUS_ADMIN_TOKEN || '';
+ 
+ if (!directusToken) {
+   console.error('DIRECTUS_ADMIN_TOKEN is required');
+   process.exit(1);
+ }
+ 
+ const mcpServer = new DirectusMCPServer(directusUrl, directusToken);
+ 
+ // MCP list endpoint
+ app.get('/mcp/v1/tools', (req, res) => {
+   res.json(mcpServer.listTools());
+ });
+ 
+ // MCP invoke endpoint
+ app.post('/mcp/v1/tools/:tool', async (req, res) => {
+   const { tool } = req.params;
+   const params = req.body;
+   
+   try {
+     const result = await mcpServer.invokeTool(tool, params);
+     res.json(result);
+   } catch (error) {
+     console.error(`Error invoking tool ${tool}:`, error);
+     res.status(500).json({ error: 'Failed to invoke tool' });
+   }
+ });
+ 
+ app.listen(port, () => {
+   console.log(`Directus MCP server running at http://localhost:${port}`);
+ }); 
```

---

Let's create the DirectusMCPServer class:

---

```diff
- 
+ import axios, { AxiosInstance } from 'axios';
+ import { getItems } from './tools/getItems';
+ import { getItem } from './tools/getItem';
+ import { createItem } from './tools/createItem';
+ import { updateItem } from './tools/updateItem';
+ import { deleteItem } from './tools/deleteItem';
+ import { uploadFile } from './tools/uploadFile';
+ import { searchItems } from './tools/searchItems';
+ 
+ interface Tool {
+   (params: any): Promise<any>;
+   description?: string;
+   parameters?: any;
+ }
+ 
+ export class DirectusMCPServer {
+   private directusUrl: string;
+   private directusToken: string;
+   private tools: Record<string, Tool>;
+ 
+   constructor(directusUrl: string, directusToken: string) {
+     this.directusUrl = directusUrl;
+     this.directusToken = directusToken;
+     
+     // Initialize the Directus client
+     const directusClient = axios.create({
+       baseURL: this.directusUrl,
+       headers: {
+         'Authorization': `Bearer ${this.directusToken}`,
+         'Content-Type': 'application/json'
+       }
+     });
+     
+     // Register tools
+     this.tools = {
+       getItems: getItems(directusClient),
+       getItem: getItem(directusClient),
+       createItem: createItem(directusClient),
+       updateItem: updateItem(directusClient),
+       deleteItem: deleteItem(directusClient),
+       uploadFile: uploadFile(directusClient),
+       searchItems: searchItems(directusClient)
+     };
+   }
+ 
+   listTools() {
+     // Format the tools according to MCP specification
+     return {
+       tools: Object.entries(this.tools).map(([name, fn]) => ({
+         name,
+         description: fn.description || `Directus ${name} operation`,
+         parameters: fn.parameters || {}
+       }))
+     };
+   }
+ 
+   async invokeTool(toolName: string, params: any) {
+     if (!this.tools[toolName]) {
+       throw new Error(`Tool ${toolName} not found`);
+     }
+     
+     try {
+       const result = await this.tools[toolName](params);
+       return { result };
+     } catch (error) {
+       console.error(`Error in ${toolName}:`, error);
+       throw error;
+     }
+   }
+ } 
```

---

## 6. Implement MCP Tool Functions

Now let's implement each of the MCP tool functions. First, let's create the getItems function:

---

```diff
- 
+ import { AxiosInstance } from 'axios';
+ 
+ export function getItems(directusClient: AxiosInstance) {
+   /**
+    * Get multiple items from a collection
+    * @param collection The collection name to retrieve items from
+    * @param query Optional query parameters (limit, filter, sort, etc.)
+    * @returns Array of items from the specified collection
+    */
+   const fn = async ({ collection, query = {} }: { collection: string; query?: Record<string, any> }) => {
+     try {
+       const response = await directusClient.get(`/items/${collection}`, { params: query });
+       return response.data.data;
+     } catch (error) {
+       console.error('Error getting items:', error);
+       throw error;
+     }
+   };
+   
+   fn.description = 'Get multiple items from a Directus collection';
+   fn.parameters = {
+     type: 'object',
+     required: ['collection'],
+     properties: {
+       collection: {
+         type: 'string',
+         description: 'The name of the collection to retrieve items from'
+       },
+       query: {
+         type: 'object',
+         description: 'Optional query parameters (limit, filter, sort, etc.)',
+         properties: {
+           limit: { type: 'number' },
+           offset: { type: 'number' },
+           sort: { type: 'string' },
+           filter: { type: 'object' }
+         }
+       }
+     }
+   };
+   
+   return fn;
+ } 
```

---

Let's create the getItem function:

---

```diff
- 
+ import { AxiosInstance } from 'axios';
+ 
+ export function getItem(directusClient: AxiosInstance) {
+   /**
+    * Get a single item from a collection by ID
+    * @param collection The collection name
+    * @param id The unique identifier of the item
+    * @returns A single item with the specified ID
+    */
+   const fn = async ({ collection, id }: { collection: string; id: string }) => {
+     try {
+       const response = await directusClient.get(`/items/${collection}/${id}`);
+       return response.data.data;
+     } catch (error) {
+       console.error('Error getting item:', error);
+       throw error;
+     }
+   };
+   
+   fn.description = 'Get a single item from a Directus collection by ID';
+   fn.parameters = {
+     type: 'object',
+     required: ['collection', 'id'],
+     properties: {
+       collection: {
+         type: 'string',
+         description: 'The name of the collection'
+       },
+       id: {
+         type: 'string',
+         description: 'The unique identifier of the item'
+       }
+     }
+   };
+   
+   return fn;
+ } 
```

---

Now let's create the createItem function:

---

```diff
- 
+ import { AxiosInstance } from 'axios';
+ 
+ export function createItem(directusClient: AxiosInstance) {
+   /**
+    * Create a new item in a collection
+    * @param collection The collection name
+    * @param item The item data to create
+    * @returns The created item
+    */
+   const fn = async ({ collection, item }: { collection: string; item: Record<string, any> }) => {
+     try {
+       const response = await directusClient.post(`/items/${collection}`, item);
+       return response.data.data;
+     } catch (error) {
+       console.error('Error creating item:', error);
+       throw error;
+     }
+   };
+   
+   fn.description = 'Create a new item in a Directus collection';
+   fn.parameters = {
+     type: 'object',
+     required: ['collection', 'item'],
+     properties: {
+       collection: {
+         type: 'string',
+         description: 'The name of the collection'
+       },
+       item: {
+         type: 'object',
+         description: 'The item data to create'
+       }
+     }
+   };
+   
+   return fn;
+ } 
```

---

Let's create the updateItem function:

---

```diff
- 
+ import { AxiosInstance } from 'axios';
+ 
+ export function updateItem(directusClient: AxiosInstance) {
+   /**
+    * Update an existing item in a collection
+    * @param collection The collection name
+    * @param id The unique identifier of the item
+    * @param item The updated item data
+    * @returns The updated item
+    */
+   const fn = async ({ collection, id, item }: { collection: string; id: string; item: Record<string, any> }) => {
+     try {
+       const response = await directusClient.patch(`/items/${collection}/${id}`, item);
+       return response.data.data;
+     } catch (error) {
+       console.error('Error updating item:', error);
+       throw error;
+     }
+   };
+   
+   fn.description = 'Update an existing item in a Directus collection';
+   fn.parameters = {
+     type: 'object',
+     required: ['collection', 'id', 'item'],
+     properties: {
+       collection: {
+         type: 'string',
+         description: 'The name of the collection'
+       },
+       id: {
+         type: 'string',
+         description: 'The unique identifier of the item'
+       },
+       item: {
+         type: 'object',
+         description: 'The updated item data'
+       }
+     }
+   };
+   
+   return fn;
+ } 
```

---

Let's create the deleteItem function:

---

```diff
- 
+ import { AxiosInstance } from 'axios';
+ 
+ export function deleteItem(directusClient: AxiosInstance) {
+   /**
+    * Delete an item from a collection
+    * @param collection The collection name
+    * @param id The unique identifier of the item
+    * @returns The deleted item or an empty object
+    */
+   const fn = async ({ collection, id }: { collection: string; id: string }) => {
+     try {
+       const response = await directusClient.delete(`/items/${collection}/${id}`);
+       return response.data.data || {};
+     } catch (error) {
+       console.error('Error deleting item:', error);
+       throw error;
+     }
+   };
+   
+   fn.description = 'Delete an item from a Directus collection';
+   fn.parameters = {
+     type: 'object',
+     required: ['collection', 'id'],
+     properties: {
+       collection: {
+         type: 'string',
+         description: 'The name of the collection'
+       },
+       id: {
+         type: 'string',
+         description: 'The unique identifier of the item'
+       }
+     }
+   };
+   
+   return fn;
+ } 
```

---

Let's create the uploadFile function:

---

```diff
- 
+ import { AxiosInstance } from 'axios';
+ 
+ export function uploadFile(directusClient: AxiosInstance) {
+   /**
+    * Upload a file to Directus
+    * @param fileContent Base64 encoded file content
+    * @param fileName Name of the file
+    * @param title Optional title for the file
+    * @param description Optional description for the file
+    * @returns The uploaded file metadata
+    */
+   const fn = async ({ 
+     fileContent, 
+     fileName, 
+     title, 
+     description 
+   }: { 
+     fileContent: string; 
+     fileName: string; 
+     title?: string; 
+     description?: string 
+   }) => {
+     try {
+       // Decode the base64 content
+       const buffer = Buffer.from(fileContent, 'base64');
+       
+       // Create form data
+       const formData = new FormData();
+       formData.append('file', new Blob([buffer]), fileName);
+       
+       if (title) {
+         formData.append('title', title);
+       }
+       
+       if (description) {
+         formData.append('description', description);
+       }
+       
+       const response = await directusClient.post('/files', formData, {
+         headers: {
+           'Content-Type': 'multipart/form-data',
+         },
+       });
+       
+       return response.data.data;
+     } catch (error) {
+       console.error('Error uploading file:', error);
+       throw error;
+     }
+   };
+   
+   fn.description = 'Upload a file to Directus';
+   fn.parameters = {
+     type: 'object',
+     required: ['fileContent', 'fileName'],
+     properties: {
+       fileContent: {
+         type: 'string',
+         description: 'Base64 encoded file content'
+       },
+       fileName: {
+         type: 'string',
+         description: 'Name of the file'
+       },
+       title: {
+         type: 'string',
+         description: 'Optional title for the file'
+       },
+       description: {
+         type: 'string',
+         description: 'Optional description for the file'
+       }
+     }
+   };
+   
+   return fn;
+ } 
```

---

Let's create the searchItems function:

---

```diff
- 
+ import { AxiosInstance } from 'axios';
+ 
+ export function searchItems(directusClient: AxiosInstance) {
+   /**
+    * Search for items in a collection
+    * @param collection The collection name
+    * @param searchQuery The search query string
+    * @param fields Optional array of fields to search in
+    * @param limit Optional limit for the number of results
+    * @returns Array of matching items
+    */
+   const fn = async ({ 
+     collection, 
+     searchQuery, 
+     fields = [], 
+     limit = 10 
+   }: { 
+     collection: string; 
+     searchQuery: string; 
+     fields?: string[]; 
+     limit?: number 
+   }) => {
+     try {
+       // Build the filter object
+       const filter: Record<string, any> = { _or: [] };
+       
+       // If fields are specified, search in those fields
+       if (fields.length > 0) {
+         for (const field of fields) {
+           filter._or.push({
+             [field]: {
+               _contains: searchQuery
+             }
+           });
+         }
+       } else {
+         // If no fields are specified, search will be done against default search fields
+         filter._or.push({
+           _search: searchQuery
+         });
+       }
+       
+       const response = await directusClient.get(`/items/${collection}`, {
+         params: {
+           filter,
+           limit
+         }
+       });
+       
+       return response.data.data;
+     } catch (error) {
+       console.error('Error searching items:', error);
+       throw error;
+     }
+   };
+   
+   fn.description = 'Search for items in a Directus collection';
+   fn.parameters = {
+     type: 'object',
+     required: ['collection', 'searchQuery'],
+     properties: {
+       collection: {
+         type: 'string',
+         description: 'The name of the collection to search in'
+       },
+       searchQuery: {
+         type: 'string',
+         description: 'The search query string'
+       },
+       fields: {
+         type: 'array',
+         items: {
+           type: 'string'
+         },
+         description: 'Optional array of fields to search in. If not provided, default search fields will be used.'
+       },
+       limit: {
+         type: 'number',
+         description: 'Optional limit for the number of results. Default is 10.'
+       }
+     }
+   };
+   
+   return fn;
+ } 
```

---

## 7. Create the Configuration File

Let's create the .env file with configuration:

---

```diff
- 
+  
```

---

Let's try again:

---



---

Let's try a different approach:

---

Command contains newline characters.

---

Let's try without newlines:

---

```bash
echo 'PORT=3000\nDIRECTUS_URL=https://directus-dev.learnwith.cc\nDIRECTUS_ADMIN_TOKEN=your_admin_token_here' > .env
```

```
╰─ echo 'PORT=3000\nDIRECTUS_URL=https://directus-dev.learnwith.cc\nDIRECTUS_ADMIN_TOKEN=your_admin_token_here' > 
.enecho 'PORT=3000\nDIRECTUS_URL=https://directus-dev.learnwith.cc\nDIRECTUS_ADMIN_TOKEN=your_admin_token_here' > 
<.cc\nDIRECTUS_ADMIN_TOKEN=your_admin_token_here' > .env

╭─     ~/dev/projects/mcp-directus/directus-mcp-server ·································· ✔  23:33:10   
╰─
```

---

It seems like there was an issue with the echo command. Let's try a more straightforward approach:

---

Command contains newline characters.

---

Let's create it with nano:

---

```bash
nano .env
```

```
[1]    86339 segmentation fault  nano .env
                                          %


```

---

Let's try with touch:

---

```bash
touch .env
```

```
❯ touch .env

╭─     ~/dev/projects/mcp-directus/directus-mcp-server ·································· ✔  23:33:22   
╰─
```

---

Now let's add the content to the .env file:

---



---

Let's try another approach:

---

```bash
echo 'PORT=3000' > .env && echo 'DIRECTUS_URL=https://directus-dev.learnwith.cc' >> .env && echo 'DIRECTUS_ADMIN_TOKEN=your_admin_token_here' >> .env
```

```

<ho 'DIRECTUS_ADMIN_TOKEN=your_admin_token_here' >> .env

╭─     ~/dev/projects/mcp-directus/directus-mcp-server ·································· ✔  23:33:35   
╰─
```

---

## 8. Update package.json with Build and Run Scripts

Now let's update the package.json to add the build and run scripts:

---

```diff
- 
+ {
+   "name": "directus-mcp-server",
+   "version": "1.0.0",
+   "main": "dist/index.js",
+   "scripts": {
+     "build": "tsc",
+     "start": "node dist/index.js",
+     "dev": "nodemon --exec ts-node src/index.ts",
+     "test": "echo \"Error: no test specified\" && exit 1"
+   },
+   "keywords": [],
+   "author": "",
+   "license": "ISC",
+   "description": "MCP server for Directus",
+   "dependencies": {
+     "axios": "^1.6.0",
+     "dotenv": "^16.3.1",
+     "express": "^4.18.2"
+   },
+   "devDependencies": {
+     "@types/express": "^4.17.21",
+     "@types/node": "^20.10.0",
+     "nodemon": "^3.0.1",
+     "ts-node": "^10.9.1",
+     "typescript": "^5.3.2"
+   }
+ } 
```

---



---

_**User**_

I've set up a new dev instance of Directus for us to work with. I've now added the appropriate creds to my .env file.

---

_**Assistant**_

<think>The user is informing me that they've set up a new dev instance of Directus and have added the appropriate credentials to their .env file. Let's look at what we can see in the attached files to understand what they've done.

Looking at the attached .env file:
```
PORT=3000
DIRECTUS_URL=http://localhost:8077
DIRECTUS_ADMIN_TOKEN=sAkELUjsqTu4J3qg0FyI_7mFnV9BPX8a
```

The user has:
1. Set PORT=3000 for the MCP server
2. Set DIRECTUS_URL to http://localhost:8077 (different from what was mentioned in their initial message, which was https://directus-dev.learnwith.cc)
3. Added an admin token

It seems like they've taken the initiative to add credentials to access a Directus instance, but they're pointing to a local instance rather than the dev instance mentioned in their query. 

I should acknowledge their update and clarify if they want to continue using the local instance at http://localhost:8077 or if they want to switch to the remote instance at https://directus-dev.learnwith.cc that they mentioned.

I should also check that all the source files are in place and let them know that we can try running the server.</think>That's great! I can see you've updated your .env file with the credentials for a local Directus instance at http://localhost:8077:

```
PORT=3000
DIRECTUS_URL=http://localhost:8077
DIRECTUS_ADMIN_TOKEN=sAkELUjsqTu4J3qg0FyI_7mFnV9BPX8a
```

All of our files for the Directus MCP server look good. Let's test if we can build and run the server to connect to your Directus instance.

First, let's build the TypeScript code:

---

```bash
npm run build
```

```
❯ npm run build
npm error Missing script: "build"
                                 npm error
                                          npm error To see a list of scripts, run:
                                                                                  npm error   npm run
                                                                                                     npm error A c
omplete log of this run can be found in: /Users/cryophobic/.npm/_logs/2025-03-12T14_10_58_922Z-debug-0.log

╭─     ~/dev/projects/mcp-directus/directus-mcp-server ································ 1 ✘  10:10:59   
╰─
```

---

It seems that the package.json scripts aren't properly registered. Let's check the content of package.json:

---

```bash
cat package.json | grep scripts -A 10
```

```
  "scripts": {
                  "test": "echo \"Error: no test specified\" && exit 1"
                                                                         },
                                                                             "keywords": [],
                                                                                              "author": "",
                                                                                                             "lice
nse": "ISC",
              "description": "",
                                  "devDependencies": {
                                                          "@types/express": "^5.0.0",
                                                                                         "@types/node": "^22.13.10
",
      "nodemon": "^3.1.9",
                          %


```

---

It looks like your package.json file doesn't have the build, start, and dev scripts that we created in our previous session. Let's update it:

---



---

Let's check the full content of package.json and update it correctly:

---

```bash
cat package.json
```

```
{
   "name": "directus-mcp-server",
                                   "version": "1.0.0",
                                                        "main": "index.js",
                                                                             "scripts": {
                                                                                             "test": "echo \"Error
: no test specified\" && exit 1"
                                  },
                                      "keywords": [],
                                                       "author": "",
                                                                      "license": "ISC",
                                                                                         "description": "",
                                                                                                             "devD
ependencies": {
                   "@types/express": "^5.0.0",
                                                  "@types/node": "^22.13.10",
                                                                                 "nodemon": "^3.1.9",
                                                                                                         "ts-node"
: "^10.9.2",
                "typescript": "^5.8.2"
                                        },
                                            "dependencies": {
                                                                 "axios": "^1.8.2",
                                                                                       "dotenv": "^16.4.7",
                                                                                                               "ex
press": "^4.21.2"
                   }
                    }
                     %


```

---

Now let's update the package.json file with the correct scripts:

---

```diff
    "license": "ISC",
    "description": "MCP server for Directus",
-   "dependencies": {
-     "axios": "^1.6.0",
-     "dotenv": "^16.3.1",
-     "express": "^4.18.2"
-   },
    "devDependencies": {
-     "@types/express": "^4.17.21",
-     "@types/node": "^20.10.0",
-     "nodemon": "^3.0.1",
-     "ts-node": "^10.9.1",
-     "typescript": "^5.3.2"
+     "@types/express": "^5.0.0",
+     "@types/node": "^22.13.10",
+     "nodemon": "^3.1.9",
+     "ts-node": "^10.9.2",
+     "typescript": "^5.8.2"
+   },
+   "dependencies": {
+     "axios": "^1.8.2",
+     "dotenv": "^16.4.7",
+     "express": "^4.21.2"
    }
  } 
```

---

Now let's try building the project again:

---

```bash
npm run build
```

```
❯ npm run build
npm error Missing script: "build"
                                 npm error
                                          npm error To see a list of scripts, run:
                                                                                  npm error   npm run
                                                                                                     npm error A c
omplete log of this run can be found in: /Users/cryophobic/.npm/_logs/2025-03-12T14_11_32_959Z-debug-0.log

╭─     ~/dev/projects/mcp-directus/directus-mcp-server ································ 1 ✘  10:11:33   
╰─
```

---

It seems like there might be an issue with the file format or the changes didn't save correctly. Let's try creating the package.json from scratch:

---

Command contains newline characters.

---

Let's try a different approach. Let's create a temporary file and then move it:

---

```diff
- 
+ {
+   "name": "directus-mcp-server",
+   "version": "1.0.0",
+   "main": "dist/index.js",
+   "scripts": {
+     "build": "tsc",
+     "start": "node dist/index.js",
+     "dev": "nodemon --exec ts-node src/index.ts",
+     "test": "echo \"Error: no test specified\" && exit 1"
+   },
+   "keywords": [],
+   "author": "",
+   "license": "ISC",
+   "description": "MCP server for Directus",
+   "devDependencies": {
+     "@types/express": "^5.0.0",
+     "@types/node": "^22.13.10",
+     "nodemon": "^3.1.9",
+     "ts-node": "^10.9.2",
+     "typescript": "^5.8.2"
+   },
+   "dependencies": {
+     "axios": "^1.8.2",
+     "dotenv": "^16.4.7",
+     "express": "^4.21.2"
+   }
+ } 
```

---

Now, let's replace the existing package.json with our temporary file:

---

```bash
mv temp_package.json package.json
```

```
mv: temp_package.json: No such file or directory
                                                %


```

---

It seems the file wasn't created. Let's try another approach:

---

```bash
rm package.json
```

```
❯ rm package.json

╭─     ~/dev/projects/mcp-directus/directus-mcp-server ·································· ✔  10:11:58   
╰─
```

---

Now let's create a new package.json file:

---

```bash
npm init -y
```

```
Wrote to /Users/cryophobic/dev/projects/mcp-directus/directus-mcp-server/package.json:

                                                                                      {
                                                                                         "name": "directus-mcp-ser
ver",
       "version": "1.0.0",
                            "main": "index.js",
                                                 "dependencies": {
                                                                      "accepts": "^1.3.8",
                                                                                              "acorn": "^8.14.1",


   "acorn-walk": "^8.3.4",
                              "anymatch": "^3.1.3",
                                                       "arg": "^4.1.3",
                                                                           "array-flatten": "^1.1.1",
                                                                                                         "asynckit
": "^0.4.0",
                "axios": "^1.8.2",
                                      "balanced-match": "^1.0.2",
                                                                     "binary-extensions": "^2.3.0",
                                                                                                       "body-parse
r": "^1.20.3",
                  "brace-expansion": "^1.1.11",
                                                   "braces": "^3.0.3",
                                                                          "bytes": "^3.1.2",
                                                                                                "call-bind-apply-h
elpers": "^1.0.2",
                      "call-bound": "^1.0.4",
                                                 "chokidar": "^3.6.0",
                                                                          "combined-stream": "^1.0.8",
                                                                                                          "concat-
map": "^0.0.1",
                   "content-disposition": "^0.5.4",
                                                       "content-type": "^1.0.5",
                                                                                    "cookie": "^0.7.1",
                                                                                                           "cookie
-signature": "^1.0.6",
                          "create-require": "^1.1.1",
                                                         "debug": "^4.4.0",
                                                                               "delayed-stream": "^1.0.0",
                                                                                                              "dep
d": "^2.0.0",
                 "destroy": "^1.2.0",
                                         "diff": "^4.0.2",
                                                              "dotenv": "^16.4.7",
                                                                                      "dunder-proto": "^1.0.1",


 "ee-first": "^1.1.1",
                          "encodeurl": "^2.0.0",
                                                    "es-define-property": "^1.0.1",
                                                                                       "es-errors": "^1.3.0",
                                                                                                                 "
es-object-atoms": "^1.1.1",
                               "es-set-tostringtag": "^2.1.0",
                                                                  "escape-html": "^1.0.3",
                                                                                              "etag": "^1.8.1",


 "express": "^4.21.2",
                          "fill-range": "^7.1.1",
                                                     "finalhandler": "^1.3.1",
                                                                                  "follow-redirects": "^1.15.9",


  "form-data": "^4.0.2",
                            "forwarded": "^0.2.0",
                                                      "fresh": "^0.5.2",
                                                                            "fsevents": "^2.3.3",
                                                                                                     "function-bin
d": "^1.1.2",
                 "get-intrinsic": "^1.3.0",
                                               "get-proto": "^1.0.1",
                                                                         "glob-parent": "^5.1.2",
                                                                                                     "gopd": "^1.2
.0",
        "has-flag": "^3.0.0",
                                 "has-symbols": "^1.1.0",
                                                             "has-tostringtag": "^1.0.2",
                                                                                             "hasown": "^2.0.2",


  "http-errors": "^2.0.0",
                              "iconv-lite": "^0.4.24",
                                                          "ignore-by-default": "^1.0.1",
                                                                                            "inherits": "^2.0.4",


   "ipaddr.js": "^1.9.1",
                             "is-binary-path": "^2.1.0",
                                                            "is-extglob": "^2.1.1",
                                                                                       "is-glob": "^4.0.3",
                                                                                                               "is
-number": "^7.0.0",
                       "make-error": "^1.3.6",
                                                  "math-intrinsics": "^1.1.0",
                                                                                  "media-typer": "^0.3.0",
                                                                                                              "mer
ge-descriptors": "^1.0.3",
                              "methods": "^1.1.2",
                                                      "mime": "^1.6.0",
                                                                           "mime-db": "^1.52.0",
                                                                                                    "mime-types": 
"^2.1.35",
              "minimatch": "^3.1.2",
                                        "ms": "^2.1.3",
                                                           "negotiator": "^0.6.3",
                                                                                      "nodemon": "^3.1.9",
                                                                                                              "nor
malize-path": "^3.0.0",
                           "object-inspect": "^1.13.4",
                                                           "on-finished": "^2.4.1",
                                                                                       "parseurl": "^1.3.3",
                                                                                                                "p
ath-to-regexp": "^0.1.12",
                              "picomatch": "^2.3.1",
                                                        "proxy-addr": "^2.0.7",
                                                                                   "proxy-from-env": "^1.1.0",


"pstree.remy": "^1.1.8",
                            "qs": "^6.13.0",
                                                "range-parser": "^1.2.1",
                                                                             "raw-body": "^2.5.2",
                                                                                                      "readdirp": 
"^3.6.0",
             "safe-buffer": "^5.2.1",
                                         "safer-buffer": "^2.1.2",
                                                                      "semver": "^7.7.1",
                                                                                             "send": "^0.19.0",


 "serve-static": "^1.16.2",
                               "setprototypeof": "^1.2.0",
                                                              "side-channel": "^1.1.0",
                                                                                           "side-channel-list": "^
1.0.0",
           "side-channel-map": "^1.0.1",
                                            "side-channel-weakmap": "^1.0.2",
                                                                                 "simple-update-notifier": "^2.0.0
",
      "statuses": "^2.0.1",
                               "supports-color": "^5.5.0",
                                                              "to-regex-range": "^5.0.1",
                                                                                             "toidentifier": "^1.0
.1",
        "touch": "^3.1.1",
                              "ts-node": "^10.9.2",
                                                       "type-is": "^1.6.18",
                                                                                "typescript": "^5.8.2",
                                                                                                           "undefs
afe": "^2.0.5",
                   "undici-types": "^6.20.0",
                                                 "unpipe": "^1.0.0",
                                                                        "utils-merge": "^1.0.1",
                                                                                                    "v8-compile-ca
che-lib": "^3.0.1",
                       "vary": "^1.1.2",
                                            "yn": "^3.1.1"
                                                            },
                                                                "devDependencies": {},
                                                                                        "scripts": {
                                                                                                        "test": "e
cho \"Error: no test specified\" && exit 1"
                                             },
                                                 "keywords": [],
                                                                  "author": "",
                                                                                 "license": "ISC",
                                                                                                    "description":
 ""
   }




```

---

Now let's update the package.json file:

---

```diff
    "license": "ISC",
    "description": "MCP server for Directus",
+   "dependencies": {
+     "axios": "^1.8.2",
+     "dotenv": "^16.4.7",
+     "express": "^4.21.2"
+   },
    "devDependencies": {
      "@types/express": "^5.0.0",
      "ts-node": "^10.9.2",
      "typescript": "^5.8.2"
-   },
-   "dependencies": {
-     "axios": "^1.8.2",
-     "dotenv": "^16.4.7",
-     "express": "^4.21.2"
    }
  } 
```

---

Now let's try building the project:

---

```bash
npm run build
```

```
❯ npm run build
npm error Missing script: "build"
                                 npm error
                                          npm error To see a list of scripts, run:
                                                                                  npm error   npm run
                                                                                                     npm error A c
omplete log of this run can be found in: /Users/cryophobic/.npm/_logs/2025-03-12T14_12_20_409Z-debug-0.log

╭─     ~/dev/projects/mcp-directus/directus-mcp-server ································ 1 ✘  10:12:20   
╰─
```

---

There seems to be an issue with the package.json formatting. Let's try to create it one more time using a simpler approach:

---

```bash
rm package.json && npm init -y
```

```
Wrote to /Users/cryophobic/dev/projects/mcp-directus/directus-mcp-server/package.json:

                                                                                      {
                                                                                         "name": "directus-mcp-ser
ver",
       "version": "1.0.0",
                            "main": "index.js",
                                                 "dependencies": {
                                                                      "accepts": "^1.3.8",
                                                                                              "acorn": "^8.14.1",


   "acorn-walk": "^8.3.4",
                              "anymatch": "^3.1.3",
                                                       "arg": "^4.1.3",
                                                                           "array-flatten": "^1.1.1",
                                                                                                         "asynckit
": "^0.4.0",
                "axios": "^1.8.2",
                                      "balanced-match": "^1.0.2",
                                                                     "binary-extensions": "^2.3.0",
                                                                                                       "body-parse
r": "^1.20.3",
                  "brace-expansion": "^1.1.11",
                                                   "braces": "^3.0.3",
                                                                          "bytes": "^3.1.2",
                                                                                                "call-bind-apply-h
elpers": "^1.0.2",
                      "call-bound": "^1.0.4",
                                                 "chokidar": "^3.6.0",
                                                                          "combined-stream": "^1.0.8",
                                                                                                          "concat-
map": "^0.0.1",
                   "content-disposition": "^0.5.4",
                                                       "content-type": "^1.0.5",
                                                                                    "cookie": "^0.7.1",
                                                                                                           "cookie
-signature": "^1.0.6",
                          "create-require": "^1.1.1",
                                                         "debug": "^4.4.0",
                                                                               "delayed-stream": "^1.0.0",
                                                                                                              "dep
d": "^2.0.0",
                 "destroy": "^1.2.0",
                                         "diff": "^4.0.2",
                                                              "dotenv": "^16.4.7",
                                                                                      "dunder-proto": "^1.0.1",


 "ee-first": "^1.1.1",
                          "encodeurl": "^2.0.0",
                                                    "es-define-property": "^1.0.1",
                                                                                       "es-errors": "^1.3.0",
                                                                                                                 "
es-object-atoms": "^1.1.1",
                               "es-set-tostringtag": "^2.1.0",
                                                                  "escape-html": "^1.0.3",
                                                                                              "etag": "^1.8.1",


 "express": "^4.21.2",
                          "fill-range": "^7.1.1",
                                                     "finalhandler": "^1.3.1",
                                                                                  "follow-redirects": "^1.15.9",


  "form-data": "^4.0.2",
                            "forwarded": "^0.2.0",
                                                      "fresh": "^0.5.2",
                                                                            "fsevents": "^2.3.3",
                                                                                                     "function-bin
d": "^1.1.2",
                 "get-intrinsic": "^1.3.0",
                                               "get-proto": "^1.0.1",
                                                                         "glob-parent": "^5.1.2",
                                                                                                     "gopd": "^1.2
.0",
        "has-flag": "^3.0.0",
                                 "has-symbols": "^1.1.0",
                                                             "has-tostringtag": "^1.0.2",
                                                                                             "hasown": "^2.0.2",


  "http-errors": "^2.0.0",
                              "iconv-lite": "^0.4.24",
                                                          "ignore-by-default": "^1.0.1",
                                                                                            "inherits": "^2.0.4",


   "ipaddr.js": "^1.9.1",
                             "is-binary-path": "^2.1.0",
                                                            "is-extglob": "^2.1.1",
                                                                                       "is-glob": "^4.0.3",
                                                                                                               "is
-number": "^7.0.0",
                       "make-error": "^1.3.6",
                                                  "math-intrinsics": "^1.1.0",
                                                                                  "media-typer": "^0.3.0",
                                                                                                              "mer
ge-descriptors": "^1.0.3",
                              "methods": "^1.1.2",
                                                      "mime": "^1.6.0",
                                                                           "mime-db": "^1.52.0",
                                                                                                    "mime-types": 
"^2.1.35",
              "minimatch": "^3.1.2",
                                        "ms": "^2.1.3",
                                                           "negotiator": "^0.6.3",
                                                                                      "nodemon": "^3.1.9",
                                                                                                              "nor
malize-path": "^3.0.0",
                           "object-inspect": "^1.13.4",
                                                           "on-finished": "^2.4.1",
                                                                                       "parseurl": "^1.3.3",
                                                                                                                "p
ath-to-regexp": "^0.1.12",
                              "picomatch": "^2.3.1",
                                                        "proxy-addr": "^2.0.7",
                                                                                   "proxy-from-env": "^1.1.0",


"pstree.remy": "^1.1.8",
                            "qs": "^6.13.0",
                                                "range-parser": "^1.2.1",
                                                                             "raw-body": "^2.5.2",
                                                                                                      "readdirp": 
"^3.6.0",
             "safe-buffer": "^5.2.1",
                                         "safer-buffer": "^2.1.2",
                                                                      "semver": "^7.7.1",
                                                                                             "send": "^0.19.0",


 "serve-static": "^1.16.2",
                               "setprototypeof": "^1.2.0",
                                                              "side-channel": "^1.1.0",
                                                                                           "side-channel-list": "^
1.0.0",
           "side-channel-map": "^1.0.1",
                                            "side-channel-weakmap": "^1.0.2",
                                                                                 "simple-update-notifier": "^2.0.0
",
      "statuses": "^2.0.1",
                               "supports-color": "^5.5.0",
                                                              "to-regex-range": "^5.0.1",
                                                                                             "toidentifier": "^1.0
.1",
        "touch": "^3.1.1",
                              "ts-node": "^10.9.2",
                                                       "type-is": "^1.6.18",
                                                                                "typescript": "^5.8.2",
                                                                                                           "undefs
afe": "^2.0.5",
                   "undici-types": "^6.20.0",
                                                 "unpipe": "^1.0.0",
                                                                        "utils-merge": "^1.0.1",
                                                                                                    "v8-compile-ca
che-lib": "^3.0.1",
                       "vary": "^1.1.2",
                                            "yn": "^3.1.1"
                                                            },
                                                                "devDependencies": {},
                                                                                        "scripts": {
                                                                                                        "test": "e
cho \"Error: no test specified\" && exit 1"
                                             },
                                                 "keywords": [],
                                                                  "author": "",
                                                                                 "license": "ISC",
                                                                                                    "description":
 ""
   }




```

---



---



---

